"use strict";!function(){var t=function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},e=function(t,e,n){for(var r=0;r<t.length;r++)e.call(n,t[r])},n=function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(e.call(n,t[i]));return r},r=function(t,e,n,r){for(var i=0;i<t.length;i++)n=e.call(r,n,t[i]);return n},i=function(t){return void 0===t?(this.count+=1,this.count):(this.count+=t,this.count)},s=function(t){return this.count=t,this.count},o=function(){if(!this.running){if(this.running=!0,this.startTime&&this.stopTime)return this.startTime=+new Date-(this.stopTime-this.startTime),void(this.stopTime=!1);this.startTime=+new Date,this.stopTime=!1}},u=function(){this.running&&(this.running=!1,this.stopTime=+new Date)},c=function(){this.running=!1,this.startTime=this.stopTime=!1},a=function(t){this.running||(this.stopTime=+new Date),this.startTime=+new Date-t},f=function(){if(this.stopTime)return this.stopTime-this.startTime;var t=+new Date;return t-(this.startTime||t)},h=function(){return this.count},m=function(t){var e={name:t.name,type:t.type||"counter"};switch(e.type){case"timer":return e.start=o.bind(e),e.stop=u.bind(e),e.reset=c.bind(e),e.set=a.bind(e),e.value=f.bind(e),e;case"counter":return e.count=t.count||0,e.increment=i.bind(e),e.set=s.bind(e),e.value=h.bind(e),e}return e},d=function(t){var e=$("<div class='scorecenter js-scorecenter'>");return $(t.selector).append(e),n(t.displays,function(n){var r=$("<div class='scorecenter-display'>");e.append(r);var i=$("<div class='scorecenter-displaytitle'>"),s=$("<div class='scorecenter-displayvalue'>");r.append(i),r.append(s);var o={format:n.format||function(t){return t},value:n.value||function(t){return n.metric&&t[n.metric]?t[n.metric].value():0},refresh:function(){var e=this.value(t.metricMap),n=this.format(e);s.text(n)}};return r.addClass(n.className),i.text(n.title||"Unknown Title"),o.refresh(),o})},p=function(i,s){s=t(s,{selector:i,metrics:[],displays:[],refresh:!1}),s.metrics=n(s.metrics,m),s.metricMap=r(s.metrics,function(t,e){return t[e.name]=e,t},{});var o=d(s),u={getMetric:function(t){return t?s.metricMap[t]:void 0},refresh:function(){e(o,function(t){t.refresh()})},interval:function(t){return s.refresh?void(s.refresh=t):(s.refresh=t,void c())},stop:function(){s.refresh=!1}},c=function a(){s.refresh&&(u.refresh(),setTimeout(a,s.refresh))};return c(),u},l=p,v="scorecenter";"undefined"!=typeof exports?module.exports=l:"function"==typeof define&&define.amd?define(v,function(){return l}):window[v]=l}();