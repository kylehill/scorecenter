"use strict";!function(){var t=function(t,e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n]);return t},e=function(t){return void 0===t?(this.count+=1,this.count):(this.count+=t,this.count)},n=function(t){return this.count=t,this.count},i=function(){if(!this.running){if(this.running=!0,this.startTime&&this.stopTime)return this.startTime=+new Date-(this.stopTime-this.startTime),void(this.stopTime=!1);this.startTime=+new Date,this.stopTime=!1}},r=function(){this.running&&(this.running=!1,this.stopTime=+new Date)},s=function(){this.running=!1,this.startTime=this.stopTime=!1},o=function(t){this.running||(this.stopTime=+new Date),this.startTime=+new Date-t},c=function(){if(this.stopTime)return this.stopTime-this.startTime;var t=+new Date;return t-(this.startTime||t)},u=function(){return this.count},a=function(t){var a={name:t.name,type:t.type||"counter"};switch(a.type){case"timer":return a.start=i.bind(a),a.stop=r.bind(a),a.reset=s.bind(a),a.set=o.bind(a),a.value=c.bind(a),a;case"counter":return a.count=t.count||0,a.increment=e.bind(a),a.set=n.bind(a),a.value=u.bind(a),a}return a},f=function(t){var e=$("<div class='scorecenter js-scorecenter'>");return $(t.selector).append(e),t.displays.map(function(n){var i=$("<div class='scorecenter-display'>");e.append(i);var r=$("<div class='scorecenter-displaytitle'>"),s=$("<div class='scorecenter-displayvalue'>");i.append(r),i.append(s);var o={format:n.format||function(t){return t},value:n.value||function(t){return n.metric&&t[n.metric]?t[n.metric].value():0},refresh:function(){var e=this.value(t.metricMap),n=this.format(e);s.text(n)}};return i.addClass(n.className),r.text(n.title||"Unknown Title"),o.refresh(),o})},h=function(e,n){n=t(n,{selector:e,metrics:[],displays:[],refresh:!1}),n.metrics=n.metrics.map(a),n.metricMap=n.metrics.reduce(function(t,e){return t[e.name]=e,t},{});var i=f(n),r={getMetric:function(t){return t?n.metricMap[t]:void 0},refresh:function(){i.forEach(function(t){t.refresh()})},interval:function(t){return n.refresh?void(n.refresh=t):(n.refresh=t,void s())},stop:function(){n.refresh=!1}},s=function o(){n.refresh&&(r.refresh(),setTimeout(o,n.refresh))};return s(),r},m=h,d="scorecenter";"undefined"!=typeof exports?module.exports=m:"function"==typeof define&&define.amd?define(d,function(){return m}):window[d]=m}();